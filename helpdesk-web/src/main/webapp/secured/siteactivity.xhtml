<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:p="http://primefaces.org/ui">

<h:head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, user-scalable=no"/>
    <title>#{msg.activity}</title>
    <ui:insert name="head-extra"/>
    <h:link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
            rel="stylesheet"/>
    <h:link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"
            rel="stylesheet"/>
    <h:outputStylesheet library="css" name="bootstrap.min.css"/>
    <h:outputStylesheet library="css" name="activity.css"/>

    <h:outputScript library="primefaces" name="jquery/jquery.js"
                    target="head"/>
    <h:outputScript library="primefaces" name="jquery/jquery-plugins.js"
                    target="head"/>
    <!-- BOOTSTRAP SCRIPTS -->
    <h:outputScript library="js" name="bootstrap.min.js"/>

</h:head>

<h:body>

    <div class="container">


        <h2>Activity details for the site:</h2>
        <h3>testsite</h3>
        <!-- User activity details -->
        <h:form id="activityTableEntries">
            <div class="activityDetails">

                <p:poll async="true" delay="2500" update="activityTableEntries"></p:poll>
                <table class="table table-striped table-hover">
                    <thead>
                    <tr>
                        <th>#{msg.client_id}</th>
                        <th>#{msg.timestamp}</th>
                        <th>#{msg.type}</th>
                        <th>#{msg.target}</th>
                    </tr>
                    </thead>
                    <tbody>
                    <ui:repeat value='#{clientActivityView.refreshSiteActivities("testsite.com")}' var="clientActivity">
                        <tr>
                            <td>#{clientActivity.clientId}</td>
                            <td>#{clientActivity.createdAt}</td>
                            <td>#{clientActivity.type}</td>
                            <td>#{clientActivity.target}</td>
                        </tr>
                    </ui:repeat>

                    </tbody>
                </table>
            </div>
        </h:form>
        <!-- /User activity details -->

    </div>


</h:body>
</html>