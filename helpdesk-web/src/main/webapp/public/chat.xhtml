<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="/templates/masterLayout.xhtml">

    <ui:define name="customTitle">Chat</ui:define>

    <ui:define name="customHead">
        <h:outputStylesheet library="css" name="chat.css"/>
        <h:outputStylesheet library="primefaces-aristo" name="theme.css"/>
        <h:outputStylesheet library="primefaces-vader" name="theme.css"/>
    </ui:define>
    <ui:define name="customScripts">
        <h:outputScript library="js" name="chat.js"/>
        <h:outputScript library="javax.faces" name="jsf.js"/>
        <h:outputScript library="primefaces" name="jquery/jquery.js"/>
        <h:outputScript library="js" name="jquery.slimscroll.min.js"/>
    </ui:define>
    <ui:define name="customLink1"><a href="/helpdesk/agent/profile">#{msg.profile}</a></ui:define>
    <ui:define name="customLink2"><a href="/helpdesk/chat">#{msg.chat}</a></ui:define>
    <ui:define name="customLink3"><a href="/helpdesk/login">#{msg.login}</a></ui:define>

    <ui:define name="customBody">
        <div class="container">
            <div class="col-md-offset-3 col-md-6 col-md-offset-3">
                <h1 style="text-align: center">Initial Chat Page</h1>

                <h:form id="messageForm"
                        onkeypress="if (event.keyCode == 13) { document.getElementById('messageForm:cmdBtn').click(); return false;}">
                    <div style="display: flex">
                        <div style="margin: auto">
                            <div id="messageNav">
                                <h2 style="text-align: center">#{msg.client} #{msg.name}</h2>
                            </div>
                            <div id="textBox">

                                <ui:repeat var="message" value="#{chatView.messages}" varStatus="status">
                                    <ui:fragment rendered='#{message.sentBy.equals("agent") and chatView.isAgent}'>
                                        <div class="myMessageRight">#{message.sentBy} #{message.content}</div>
                                    </ui:fragment>
                                    <ui:fragment rendered='#{message.sentBy.equals("agent") and !chatView.isAgent}'>
                                        <div class="myMessageLeft">#{message.sentBy} #{message.content}</div>
                                    </ui:fragment>
                                    <ui:fragment
                                            rendered='#{message.sentBy.equals("client" ) and chatView.isAgent}'>
                                        <div class="myMessageLeft">#{message.sentBy} #{message.content}</div>
                                    </ui:fragment>
                                    <ui:fragment
                                            rendered='#{message.sentBy.equals("client") and !chatView.isAgent}'>
                                        <div class="myMessageRight">#{message.sentBy} #{message.content}</div>
                                    </ui:fragment>
                                </ui:repeat>


                            </div>
                            <div id="myText">
                                <p:inputTextarea style="width: 400px" id="chatText"
                                                 value="#{chatView.content}"></p:inputTextarea>
                            </div>
                            <div id="myBut">
                                <p:commandButton value="#{msg.send}" id="cmdBtn" oncomplete="onSubmissionComplete()"
                                                 actionListener="#{chatView.send}"
                                                 update="messageForm"
                                                 styleClass="ui-priority-primary"></p:commandButton>
                                <button type="button" class="btn btn-info" data-toggle="modal"
                                        data-target="#myModal">#{msg.error_ticket}
                                </button>

                            </div>
                        </div>

                    </div>
                </h:form>

                <div id="myModal" class="modal fade" role="dialog">
                    <div class="modal-dialog">

                        <!-- Modal content-->
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal">&#215;</button>
                                <h4 class="modal-title">#{msg.error_ticket}</h4>
                            </div>
                            <div class="modal-body">
                                <h:form>
                                    <div class="form-group">
                                        <label for="title">#{msg.issue_name}:</label>
                                        <input type="text" class="form-control" id="title"></input>
                                    </div>
                                    <div class="form-group">
                                        <label for="description">#{msg.issue_decription}:</label>
                                        <input type="text" class="form-control" id="description"></input>
                                    </div>
                                    <div class="form-group">
                                        <label for="type">#{msg.issue_type}:</label>
                                        <input type="text" class="form-control" id="type"></input>
                                    </div>
                                    <button type="submit" class="btn btn-info">#{msg.send}</button>

                                </h:form>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default"
                                        data-dismiss="modal">#{msg.close}</button>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </ui:define>
</ui:composition>